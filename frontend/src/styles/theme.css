/*
 * Flask RAG Admin Frontend Theme
 *
 * This stylesheet defines the custom theme for the application,
 * building upon Bootstrap 5. It aims for a clean, modern, and
 * user-friendly interface with a color palette inspired by
 * Studio Ghibli's spring aesthetics.
 *
 * Key Principles:
 * - Bootstrap-first: Leverage Bootstrap utility classes and components.
 * - Themed: Use CSS variables for consistent branding and easy updates.
 * - Accessible: Ensure good contrast and touch targets.
 * - Responsive: Adapt to various screen sizes.
 * - Documented: Clear comments for maintainability.
 */

/* ---------- Studio Ghibli Spring Color Palette Variables ---------- */
/* These colors evoke the gentle, vibrant, and serene feel of Ghibli's spring landscapes. */
:root {
  /* Brand Colors (inspired by Ghibli's spring skies, fresh greens, and soft blossoms) */
  --brand-primary: #87CEEB;   /* Soft Sky Blue - for main actions, highlights */
  --brand-secondary: #A9B7B0; /* Light Sage Green - for subtle backgrounds, secondary elements */
  --brand-success: #8BC34A;   /* Fresh Lime Green - for positive feedback, success states */
  --brand-danger: #E57373;   /* Light Coral - for warnings, error states */
  --brand-warning: #FFD54F;   /* Muted Yellow - for alerts, attention-grabbing elements */
  --brand-info: #CFD8DC;     /* Light Blue Grey - for informational messages */

  /* Text Colors */
  --text-white-75: rgba(255, 255, 255, 0.75);
  --text-white-50: rgba(255, 255, 255, 0.5);

  /* Bootstrap Overrides (using Ghibli palette) */
  --bs-primary: var(--brand-primary);
  --bs-secondary: var(--brand-secondary);
  --bs-success: var(--brand-success);
  --bs-danger: var(--brand-danger);
  --bs-warning: var(--brand-warning);
  --bs-info: var(--brand-info);

  /* General UI Colors */
  --bs-body-bg: #f8f9fa; /* Light background for general content */
  --bs-body-color: #343a40; /* Dark grey for main text */
  --bs-card-bg: #ffffff; /* White background for cards */
  --bs-list-bg: #ffffff; /* White background for lists */
  --bs-border-color: #dee2e6; /* Light grey for borders */
  --bs-input-bg: #ffffff; /* White background for inputs */
  --bs-input-border-color: var(--bs-border-color);
  --bs-link-color: var(--brand-primary); /* Links use primary color */
}

/* ---------- Base Styles & Global Resets ---------- */
html, body, #root {
  height: 100%; /* Ensure full height for layout */
}

body {
  font-family: 'Inter', sans-serif; /* Use Inter for a modern feel, fallback to sans-serif */
  font-size: 16px; /* Base font size for better mobile readability */
  line-height: 1.6;
  background-color: var(--bs-body-bg); /* Use theme variable for body background */
  color: var(--bs-body-color); /* Use theme variable for body text color */
}

/* Ensure touch targets are at least 44px for accessibility */
.btn, .form-control, .form-select {
  min-height: 44px;
}

.navbar-brand {
  font-weight: 600; /* Make brand name stand out */
}

pre {
  white-space: pre-wrap; /* Preserve whitespace and wrap long lines */
  word-break: break-word; /* Break long words to prevent overflow */
}

/* Utility spacing for inline groups (Bootstrap-like gap) */
.gap-2 > * + * { margin-left: .5rem; }

/* Add text color utilities using theme variables */
.text-white-75 { color: var(--text-white-75) !important; }
.text-white-50 { color: var(--text-white-50) !important; }

/* Improved utility classes for layout */
.min-vh-75 { min-height: 75vh; } /* Minimum viewport height 75% */
.vh-100 { height: 100vh; } /* Full viewport height */

/* Focus improvements for accessibility (using Bootstrap's focus ring) */
.btn:focus,
.form-control:focus,
.form-select:focus {
  box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25); /* Use primary color for focus ring */
  border-color: var(--bs-primary); /* Primary color border on focus */
}

/* Skip to main content link (hidden by default, visible on focus) */
.skip-link {
  position: absolute;
  top: -40px; /* Hide off-screen */
  left: 6px;
  background: var(--brand-primary); /* Use theme primary color */
  color: white;
  padding: 8px;
  text-decoration: none;
  z-index: 1000; /* Ensure it's on top */
}

.skip-link:focus {
  top: 6px; /* Bring into view on focus */
}

/* ---------- Custom DocumentSelector Theme Classes ---------- */
/* Styles specific to the DocumentSelector component for consistent look */
.theme-doc-selector {
  /* Container for document selector - add specific styles here if needed */
}

.theme-doc-list {
  max-height: 200px; /* Limit height for scrollable list */
  overflow-y: auto; /* Enable vertical scrolling */
  background: var(--bs-list-bg); /* Use theme list background */
  border-radius: 0.5rem; /* Rounded corners */
  border: 1px solid var(--bs-border-color); /* Subtle border */
}

.theme-doc-item {
  cursor: pointer; /* Indicate clickable item */
  border-radius: 0.5rem; /* Rounded corners for individual items */
  transition: background 0.2s, box-shadow 0.2s; /* Smooth transitions */
  padding: 0.75rem 1rem; /* Adequate padding */
}

.theme-doc-item:hover {
  background-color: rgba(var(--bs-primary-rgb), 0.1); /* Light primary tint on hover */
}

.theme-doc-item.bg-primary {
  background-color: var(--brand-primary) !important; /* Use theme primary for active state */
  color: #fff; /* White text for active state */
}

.theme-doc-input {
  border-radius: 0.5rem; /* Rounded input field */
  font-size: 1rem; /* Consistent font size */
  border: 1px solid var(--bs-input-border-color); /* Use theme input border */
  background: var(--bs-input-bg); /* Use theme input background */
}

/* ---------- Custom LoginForm Theme Classes ---------- */
/* Styles specific to the LoginForm component for a branded login experience */
.theme-login-card {
  background: var(--bs-card-bg); /* Use theme card background */
  box-shadow: 0 1rem 2rem rgba(0,0,0,.15); /* Prominent shadow */
  border-radius: 1rem; /* More rounded corners */
  border: none; /* Remove default card border */
}

.theme-login-avatar {
  /* Ghibli-inspired gradient for the avatar icon background */
  background: linear-gradient(135deg, var(--brand-primary) 0%, #ADD8E6 100%); /* Soft sky blue gradient */
  color: #fff; /* White icon color */
  box-shadow: 0 0.5rem 1rem rgba(0,0,0,.10); /* Subtle shadow */
}

.theme-input {
  padding-left: 1rem; /* Consistent padding */
  font-size: 1rem; /* Consistent font size */
  border-radius: 0.5rem; /* Rounded input fields */
  border: 1px solid var(--bs-input-border-color); /* Use theme input border */
  background: var(--bs-input-bg); /* Use theme input background */
}

.theme-btn {
  font-size: 1.1rem; /* Slightly larger font for buttons */
  border-radius: 0.5rem; /* Rounded buttons */
  /* Subtle shadow using primary brand color */
  box-shadow: 0 0.25rem 0.5rem rgba(var(--bs-primary-rgb), 0.08);
}

/* ---------- Landing Page Styles ---------- */
/* Specific styles for the landing page layout and hero section */
.landing-page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.hero-section {
  flex: 1;
  /* Ghibli-inspired spring morning gradient */
  background: linear-gradient(135deg, #A9D18E 0%, #87CEEB 100%); /* Soft green to sky blue */
  color: white;
  position: relative;
  padding: 2rem 0;
}

.hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.1); /* Subtle overlay for text readability */
  z-index: 1;
}

.hero-section > .container {
  position: relative;
  z-index: 2; /* Ensure content is above overlay */
}

.hero-content h1 {
  line-height: 1.2; /* Improved readability for large headings */
}

.info-section {
  padding: 4rem 0; /* Vertical padding for information sections */
}

/* ---------- Cards & Components ---------- */
/* General card styling, extending Bootstrap's .card */
.card {
  border-radius: 1rem; /* Consistent rounded corners */
  border: none; /* Remove default Bootstrap border */
  transition: transform 0.2s ease, box-shadow 0.2s ease; /* Smooth hover effects */
}

.card:hover {
  transform: translateY(-2px); /* Slight lift on hover */
}

.card-elevated {
  box-shadow: 0 .5rem 1rem rgba(0,0,0,.15); /* More pronounced shadow */
}

.card-flat {
  box-shadow: none !important; /* Remove shadow */
}

/* Special styling for cards within the hero section */
.hero-section .card {
  backdrop-filter: blur(10px); /* Frosted glass effect */
  background: rgba(255,255,255,0.95); /* Semi-transparent white background */
  box-shadow: 0 1rem 2rem rgba(0,0,0,.2); /* Stronger shadow */
}

/* ---------- Dashboard Styles ---------- */
/* Specific styles for the dashboard layout and components */
.dashboard {
  min-height: 100vh;
  background-color: var(--bs-body-bg); /* Use theme body background */
}

.dashboard .navbar {
  box-shadow: 0 2px 4px rgba(0,0,0,.1); /* Subtle shadow for navbar */
}

.dashboard .card {
  border: none;
  box-shadow: 0 .125rem .25rem rgba(0,0,0,.075); /* Lighter shadow for dashboard cards */
}

.dashboard .card-header {
  background-color: var(--bs-card-bg); /* Use theme card background */
  border-bottom: 1px solid rgba(0,0,0,.125); /* Subtle bottom border */
  font-weight: 600; /* Bold header text */
}

/* Chat input improvements for mobile and desktop */
.chat-input-container .form-control {
  border: none; /* Remove border for cleaner look */
  font-size: 1rem;
  padding: 1rem; /* Generous padding */
}

.chat-input-container .btn {
  border: none; /* Remove border for cleaner look */
  font-weight: 600; /* Bold button text */
}

/* Messages container for chat history */
.messages-container {
  scroll-behavior: smooth; /* Smooth scrolling for new messages */
}

/* ---------- Mobile-specific improvements (Offcanvas, Lists) ---------- */
.offcanvas {
  width: 300px !important; /* Fixed width for offcanvas sidebar */
}

.offcanvas-header {
  background-color: var(--brand-primary); /* Use theme primary for offcanvas header */
  color: white; /* White text */
}

.offcanvas-title {
  font-size: 1.1rem;
  font-weight: 600;
}

/* Improve list group items for mobile and general use */
.list-group-item {
  border: none; /* Remove default list group item border */
  border-bottom: 1px solid rgba(0,0,0,.125) !important; /* Add subtle bottom border */
  padding: 1rem; /* Generous padding */
  transition: all 0.2s ease; /* Smooth transitions */
}

.list-group-item:hover {
  background-color: #f8f9fa; /* Light background on hover */
}

.list-group-item.active {
  background-color: var(--brand-primary) !important; /* Use theme primary for active state */
  color: white !important; /* White text for active state */
}

/* ---------- Layout helpers (Bootstrap-friendly) ---------- */
/* Custom utility classes for common layout patterns */
.app-section { margin-bottom: 1.5rem; } /* Consistent vertical spacing for sections */
.container-narrow { max-width: 720px; } /* Narrower container for content focus */
.sticky-md { position: static; } /* Default static, overridden at md breakpoint */
.two-col-md { display: block; } /* Default block, overridden at md breakpoint for grid */

/* List wrapping for long content to prevent overflow */
.list-group-item { word-break: break-word; }

/* Buttons adjacency spacing for multiple buttons in a row */
.btn + .btn { margin-left: .5rem; }

/* Responsive typography tweaks for better hierarchy and readability */
h1, h2, h3, h4, h5, h6 {
  margin-top: .5rem;
  margin-bottom: .75rem;
  line-height: 1.3;
}

.text-balance { text-wrap: balance; } /* Balance text lines for better aesthetics */

/* Code/answer blocks styling for readability */
pre {
  background: #f1f3f5; /* Light grey background */
  border: 1px solid rgba(0,0,0,.05); /* Subtle border */
  border-radius: .5rem; /* Rounded corners */
  padding: .75rem 1rem; /* Adequate padding */
  max-height: 45vh; /* Limit height for scrollable code blocks */
  overflow: auto; /* Enable scrolling */
  font-size: 0.9rem; /* Slightly smaller font size */
}

/* Input groups on mobile to prevent horizontal overflow */
.input-group > .form-control { min-width: 0; }

/* ---------- Footer Styles ---------- */
footer {
  margin-top: auto; /* Push footer to the bottom */
  padding-top: 2rem; /* Add padding above footer content */
  padding-bottom: 2rem; /* Add padding below footer content */
  background-color: var(--bs-body-bg); /* Use theme body background */
  border-top: 1px solid var(--bs-border-color); /* Subtle top border */
}

footer a {
  color: var(--bs-body-color); /* Default link color */
  text-decoration: none; /* Remove underline */
}

footer a:hover {
  color: var(--brand-primary) !important; /* Primary color on hover */
  transition: color 0.2s ease; /* Smooth color transition */
}

footer .social-icons a,
footer a.p-2 {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%; /* Circular icons */
  background: rgba(var(--bs-body-color-rgb), 0.1); /* Subtle background based on body text */
  transition: all 0.2s ease; /* Smooth transitions */
  text-decoration: none;
}

footer .social-icons a:hover,
footer a.p-2:hover {
  background: var(--brand-primary); /* Primary color background on hover */
  color: white; /* White icon on hover */
  transform: translateY(-2px); /* Slight lift on hover */
}

/* ---------- Responsive breakpoints (Bootstrap) ---------- */
/* Custom adjustments for various screen sizes, extending Bootstrap's grid */

/* Extra small devices (portrait phones, less than 576px) */
@media (max-width: 575.98px) {
  .navbar-brand { font-size: 1rem; }
  .container { padding-left: 1rem; padding-right: 1rem; }
  .input-group .form-control { font-size: 1rem; }
  .btn { font-size: 1rem; }

  .hero-section {
    padding: 2rem 0;
    min-height: 100vh;
  }

  .hero-content {
    margin-top: 2rem;
    text-align: center;
  }

  .display-6 {
    font-size: 2rem;
  }

  .display-5 {
    font-size: 2.2rem;
  }

  /* Improve card spacing on mobile */
  .card {
    margin-bottom: 1rem;
  }

  /* Better button sizes for touch */
  .btn-lg {
    font-size: 1.1rem;
    padding: 0.75rem 1.5rem;
  }

  /* Adjust hero section spacing */
  .info-section {
    padding: 3rem 0;
  }

  /* Navbar improvements */
  .navbar {
    padding: 0.75rem 1rem;
  }

  .navbar-nav .btn {
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
  }
}

/* Small devices (landscape phones, 576px and up) */
@media (min-width: 576px) {
  .container {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

/* Medium devices (tablets, 768px and up) */
@media (min-width: 768px) {
  .sticky-md { position: sticky; top: 1rem; } /* Make element sticky at medium screens */
  .two-col-md { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; } /* Two columns grid */

  .hero-section {
    padding: 4rem 0;
  }

  .hero-content {
    text-align: left;
  }

  .info-section {
    padding: 5rem 0;
  }
}

/* Large devices (desktops, 992px and up) */
@media (min-width: 992px) {
  .container-narrow { max-width: 840px; }

  .hero-section {
    padding: 6rem 0;
  }
}

/* Extra large devices (large desktops, 1200px and up) */
@media (min-width: 1200px) {
  .container-narrow { max-width: 900px; }
}

/* ---------- Accessibility & Preference Media Queries ---------- */

/* Dark mode support (Ghibli-inspired night palette) */
@media (prefers-color-scheme: dark) {
  :root {
    --bs-body-bg: #2C3E50; /* Dark blue-grey background */
    --bs-body-color: #ECF0F1; /* Light grey text */
    --bs-card-bg: #34495E; /* Slightly lighter dark card background */
    --bs-list-bg: #34495E; /* Dark list background */
    --bs-border-color: #4A627A; /* Darker border color */
    --bs-input-bg: #34495E; /* Dark input background */
    --bs-input-border-color: #4A627A;
  }

  body {
    background-color: var(--bs-body-bg);
    color: var(--bs-body-color);
  }

  .card {
    background-color: var(--bs-card-bg);
    color: var(--bs-body-color);
  }

  .bg-light {
    background-color: var(--bs-card-bg) !important; /* Adjust light background utility */
  }

  pre {
    background: #212529; /* Darker background for code blocks */
    border-color: rgba(255,255,255,.1);
    color: #ECF0F1;
  }

  footer .social-icons a,
  footer a.p-2 {
    background: rgba(255,255,255,0.1);
  }
}

/* High contrast support */
@media (prefers-contrast: high) {
  .btn {
    border: 2px solid currentColor; /* Stronger button borders */
  }

  .card {
    border: 1px solid #dee2e6; /* Explicit card borders */
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important; /* Disable smooth scrolling */
  }
}